head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2005.04.17.14.55.01;	author buff;	state Exp;
branches;
next	1.3;

1.3
date	2003.05.31.15.46.16;	author buff;	state Exp;
branches;
next	1.2;

1.2
date	2003.03.08.01.33.30;	author buff;	state Exp;
branches;
next	1.1;

1.1
date	2003.03.02.16.41.03;	author buff;	state Exp;
branches;
next	;


desc
@MrsAbbott::Config
@


1.4
log
@Added support for %lcSubClasses and its listing of classes,
subclasses, and their coverage
@
text
@#!/usr/local/bin/perl -w

# ----------------------------------------------------------------
# $Id: Config.pm,v 1.3 2003/05/31 15:46:16 buff Exp buff $
# $Author: buff $
# $RCSfile: Config.pm,v $
# Current $Revision: 1.3 $
# Current $Date: 2003/05/31 15:46:16 $
# Current $Locker: buff $
# ----------------------------------------------------------------

package MrsAbbott::Config;

use strict;
require Exporter;

$|++;

use vars     qw (@@ISA @@EXPORT @@EXPORT_OK);
@@ISA       = qw (Exporter);
@@EXPORT    = qw (@@titleFields %titleFields
		 $dataSource $userName $password %lcSubClasses
		 @@titleArticles @@bookFormats
		 @@purchaseDays @@purchaseMonths @@purchaseYears
		 $HTML_HEAD $HTML_FOOT $SEARCH_FORM
		 );
@@EXPORT_OK = qw ();

use vars qw($dataSource $userName $password $HTML_HEAD $HTML_FOOT %URL
	    $SEARCH_FORM %lcSubClasses
	    @@purchaseDays @@purchaseMonths @@purchaseYears
	    @@titleArticles @@bookFormats @@titleFields %titleFields);

# Set these variables to the right values for your database type 
# and user and database you've set for the catalogue.

$dataSource = 'DBI:mysql:library';
$userName   = 'marion';
$password   = 'shipoopie';

# Your library's name.
my $libraryName = "Miskatonic University Press Library";

# Admin e-mail address
my $adminEmail = "buff\@@pobox.com";

# Name of lc-subclasses.txt file
my $lcSubClassList = "lc-subclasses.txt";

# ----------

%URL = ('update' => '/cgi-bin/update',
        'title'  => '/cgi-bin/title',
        'search' => '/cgi-bin/search',
);

@@titleFields = ('Title ID', 'Article', 'Title', 'Format', 'Edition', 
		'Publisher', 'Call No.', 'ISBN', 'First Printed', 'Published', 
		'Purchase Date', 'Purchase Cost', 'First Line', 'Notes');

%titleFields = ('01id'           => 'Title ID',
		'02article'      => 'Article',
		'03title'        => 'Title',
		'04format'       => 'Format',
		'05edition'      => 'Edition',
		'06publisher'    => 'Publisher',
		'07callNumber'   => 'Call No.',
		'08isbn'         => 'ISBN',
		'09pubFirst'     => 'First Printed',
		'10pubYear'      => 'Published',
		'11purchaseCost' => 'Purchase Cost',
		'12purchaseDate' => 'Purchase Date',
		'13firstLine'    => 'First Line',
		'14notes'        => 'Notes'
		);

@@titleArticles = ('', qw(A An The));

# Book formats: mass market, paperback, trade paperback, hardcover,
# LP, CD, comic book.
@@bookFormats = ('', qw(MM PB TP HC LP CD CB));

@@purchaseYears = ('', (1995..2008));
# 01, 02 ... 12
@@purchaseMonths = (('x'), map { (($_ < 10) ? "0" : "") . $_ } (1..12));
@@purchaseDays   = (('x'), map { (($_ < 10) ? "0" : "") . $_ } (1..31));



$SEARCH_FORM = qq(
<form action="/cgi-bin/search" method="post">

<table>

<tr>

<td>Title</td>
<td>
<input type="text" size="20" name="title" value="::TITLE::" />
</td>

<td>Author</td>
<td>
<input type="text" size="20" name="author" value="::AUTHOR::" />
</td>

<td>
<input type="submit" name="search" value="Search" />
</td>

</tr>
</table>

</form>

);

my $titleBarSearch = qq(

<form action="/cgi-bin/search" method="post">
Title: <input type="text" size="10" name="title" value="::TITLE::" />
Author: <input type="text" size="10" name="author" value="::AUTHOR::" />
<input type="submit" name="search" value="Search" />
</form>

);

$HTML_HEAD = qq(
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>
<title>Mrs. Abbott: $libraryName</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rev="made" href="mailto:$adminEmail" />
<link rel="stylesheet" type="text/css" href="/library.css" />
<!-- link rel="shortcut icon"
      href="http://library/images/favicon.ico" / -->
</head>

<body>

<h1>$libraryName</h1>

<div id="topBar">

<div id="menu">

<a href="/">Home</a> <span> | </span>
<a href="/cgi-bin/search">Search</a> <span> | </span>
<a href="/cgi-bin/update">Add</a> <span> | </span>
<a href="/cgi-bin/series">Series</a> <span> | </span>
<a href="/cgi-bin/pseuds">Pseuds</a> <span> | </span>

</div>

<div id="search">

$titleBarSearch

</div>

</div>

<p>&nbsp;</p>

<hr />

);

$HTML_FOOT = qq(
</body>
</html>
);

# Set up the LC subclasses hash, which search uses to make
# the class and subclass letters more informative.

if (open LC, $lcSubClassList) {

    while (<LC>) {

	next if /^#/;
	next unless /^.*$/;

	chomp;

	# Horrible ugly way to split the lines, but for some reason
	# I couldn't get a ^(\w{1,3}) (.*)/ sort of regex working.
	# Yes, I'm embarrassed.
	my $cut = index $_, " ";
	my $subclass = substr ($_, 0, $cut);
	my $category = substr ($_, $cut + 1);
	$lcSubClasses{$subclass} = $category;

    }

} else {

    print STDERR "Could not open $lcSubClassList";

}

1;
@


1.3
log
@Updated top menu bar.  Looking nice.
@
text
@d4 1
a4 1
# $Id: Config.pm,v 1.2 2003/03/08 01:33:30 buff Exp buff $
d7 2
a8 2
# Current $Revision: 1.2 $
# Current $Date: 2003/03/08 01:33:30 $
d22 1
a22 1
		 $dataSource $userName $password
d30 1
a30 1
	    $SEARCH_FORM 
d47 3
d83 1
a83 1
@@purchaseYears = ('', (1995..2004));
d85 2
a86 2
@@purchaseMonths = (('x'), map { (($_ < 10) ? "0" : "") . $_  } (1..12));
@@purchaseDays = (('x'), map { (($_ < 10) ? "0" : "") . $_  } (1..31));
d177 27
d205 1
@


1.2
log
@Moved some things around, changed the left-hand menu to a top bar,
cleaned up HTML a bit.
Still needs work.
@
text
@d4 6
a9 6
# $Id: delcust.pl,v 1.11 2002/04/12 20:03:10 ncc0234 Exp ncc0234 $
# $Author: ncc0234 $
# $RCSfile: delcust.pl,v $
# Current $Revision: 1.11 $
# Current $Date: 2002/04/12 20:03:10 $
# Current $Locker: ncc0234 $
d42 1
a42 1
my $libraryName = "Miskatonic University Library";
a114 4
# my $titleBarSearch = $SEARCH_FORM;
# $titleBarSearch =~ s/::TITLE:://;
# $titleBarSearch =~ s/::AUTHOR:://;

d118 2
a119 2
Title: <input type="text" size="10" name="title" value="" />
Author: <input type="text" size="10" name="author" value="" />
d145 1
a145 1
<div style="float: left;">
d147 5
a151 9
<a href="/">Home</a>
|
<a href="/cgi-bin/search">Search</a>
|
<a href="/cgi-bin/update">Add a Book</a>
|
<a href="/cgi-bin/series">Series</a>
|
<a href="/cgi-bin/pseuds">Pseudonyms</a>
d155 1
a155 1
<div style="float: right;">
@


1.1
log
@Initial revision
@
text
@d3 9
d44 3
d80 1
a80 1
@@purchaseYears = ('', (1995..2002));
d87 42
d130 3
d136 5
a140 1
<link rel="stylesheet" type="text/css" href="/library.css">
d143 3
a145 1
<body bgcolor="#AAAAAAFF">
d147 1
a147 1
<h1 align="center">$libraryName</h1>
d149 4
a152 4
<table width="100%" cellpadding="5" cellspacing="5" height="90%">
<tr>
<td style="leftmenu" valign="top" bgcolor="#FFAAAA">
<br><br><br>
d154 3
a156 3
<br>
<a href="/cgi-bin/update">Add Book</a>
<br>
d158 6
a163 8
<br>
<a href="/cgi-bin/pseuds">Pseuds</a>
<br>
<br>
<a href="/">Home</a>
</td>
<td valign="top" align="left">
);
d165 1
a165 7
$HTML_FOOT = qq(
</td>
</tr>
</table>
</body>
</html>
);
d167 1
a167 2
$SEARCH_FORM = qq(
<form action="/cgi-bin/search" method="post">
d169 1
a169 1
<table>
d171 1
a171 8
<tr>
<td>Title</td>
<td><input type="text" size="20" name="title" value="::TITLE::"></td>
<td>Author</td>
<td><input type="text" size="20" name="author" value="::AUTHOR::"></td>
<td><input type="submit" name="search" value="Search"></td>
</tr>
</table>
d173 1
a173 1
</pre>
d175 1
d177 3
a179 1
</form>
@
